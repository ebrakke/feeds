import{W as F,G as S,_ as ee,Y as L,Q as re,O as ne,g as z,m as ae,T as se,U as te,V as J,X as D,a2 as x,a0 as fe,ad as oe,ae as U,H as ie,a6 as H,a8 as ue,af as $,a9 as le,ag as V,N as ce,ah as de,ai as ve,aj as he,ak as T,a3 as j,a5 as G,al as R,a1 as pe,am as _e,a4 as ge,ac as X,an as K,ao as me,ap as Ee,aq as Te,ar as ye,as as Se,at as Ae}from"./D_G30FA3.js";function je(e,n){return n}function Ne(e,n,r){for(var o=[],l=n.length,u,i=n.length,p=0;p<l;p++){let m=n[p];G(m,()=>{if(u){if(u.pending.delete(m),u.done.add(m),u.pending.size===0){var c=e.outrogroups;P($(u.done)),c.delete(u),c.size===0&&(e.outrogroups=null)}}else i-=1},!1)}if(i===0){var t=o.length===0&&r!==null;if(t){var d=r,s=d.parentNode;_e(s),s.append(d),e.items.clear()}P(n,!t)}else u={pending:new Set(n),done:new Set},(e.outrogroups??=new Set).add(u)}function P(e,n=!0){for(var r=0;r<e.length;r++)ge(e[r],n)}var Y;function Ge(e,n,r,o,l,u=null){var i=e,p=new Map,t=(n&K)!==0;if(t){var d=e;i=S?F(ee(d)):d.appendChild(L())}S&&re();var s=null,m=ae(()=>{var f=r();return le(f)?f:f==null?[]:$(f)}),c,h=!0;function A(){a.fallback=s,Oe(a,c,i,n,o),s!==null&&(c.length===0?(s.f&T)===0?j(s):(s.f^=T,M(s,null,i)):G(s,()=>{s=null}))}var w=ne(()=>{c=z(m);var f=c.length;let I=!1;if(S){var C=se(i)===te;C!==(f===0)&&(i=J(),F(i),D(!1),I=!0)}for(var E=new Set,N=ie,b=ue(),g=0;g<f;g+=1){S&&x.nodeType===fe&&x.data===oe&&(i=x,I=!0,D(!1));var O=c[g],k=o(O,g),v=h?null:p.get(k);v?(v.v&&U(v.v,O),v.i&&U(v.i,g),b&&N.skipped_effects.delete(v.e)):(v=we(p,h?i:Y??=L(),O,k,g,l,n,r),h||(v.e.f|=T),p.set(k,v)),E.add(k)}if(f===0&&u&&!s&&(h?s=H(()=>u(i)):(s=H(()=>u(Y??=L())),s.f|=T)),S&&f>0&&F(J()),!h)if(b){for(const[W,Z]of p)E.has(W)||N.skipped_effects.add(Z.e);N.oncommit(A),N.ondiscard(()=>{})}else A();I&&D(!0),z(m)}),a={effect:w,items:p,outrogroups:null,fallback:s};h=!1,S&&(i=x)}function Oe(e,n,r,o,l){var u=(o&me)!==0,i=n.length,p=e.items,t=e.effect.first,d,s=null,m,c=[],h=[],A,w,a,f;if(u)for(f=0;f<i;f+=1)A=n[f],w=l(A,f),a=p.get(w).e,(a.f&T)===0&&(a.nodes?.a?.measure(),(m??=new Set).add(a));for(f=0;f<i;f+=1){if(A=n[f],w=l(A,f),a=p.get(w).e,e.outrogroups!==null)for(const v of e.outrogroups)v.pending.delete(a),v.done.delete(a);if((a.f&T)!==0)if(a.f^=T,a===t)M(a,null,r);else{var I=s?s.next:t;a===e.effect.last&&(e.effect.last=a.prev),a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),y(e,s,a),y(e,a,I),M(a,I,r),s=a,c=[],h=[],t=s.next;continue}if((a.f&R)!==0&&(j(a),u&&(a.nodes?.a?.unfix(),(m??=new Set).delete(a))),a!==t){if(d!==void 0&&d.has(a)){if(c.length<h.length){var C=h[0],E;s=C.prev;var N=c[0],b=c[c.length-1];for(E=0;E<c.length;E+=1)M(c[E],C,r);for(E=0;E<h.length;E+=1)d.delete(h[E]);y(e,N.prev,b.next),y(e,s,N),y(e,b,C),t=C,s=b,f-=1,c=[],h=[]}else d.delete(a),M(a,t,r),y(e,a.prev,a.next),y(e,a,s===null?e.effect.first:s.next),y(e,s,a),s=a;continue}for(c=[],h=[];t!==null&&t!==a;)(d??=new Set).add(t),h.push(t),t=t.next;if(t===null)continue}(a.f&T)===0&&c.push(a),s=a,t=a.next}if(e.outrogroups!==null){for(const v of e.outrogroups)v.pending.size===0&&(P($(v.done)),e.outrogroups?.delete(v));e.outrogroups.size===0&&(e.outrogroups=null)}if(t!==null||d!==void 0){var g=[];if(d!==void 0)for(a of d)(a.f&R)===0&&g.push(a);for(;t!==null;)(t.f&R)===0&&t!==e.fallback&&g.push(t),t=t.next;var O=g.length;if(O>0){var k=(o&K)!==0&&i===0?r:null;if(u){for(f=0;f<O;f+=1)g[f].nodes?.a?.measure();for(f=0;f<O;f+=1)g[f].nodes?.a?.fix()}Ne(e,g,k)}}u&&X(()=>{if(m!==void 0)for(a of m)a.nodes?.a?.apply()})}function we(e,n,r,o,l,u,i,p){var t=(i&ve)!==0?(i&he)===0?ce(r,!1,!1):V(r):null,d=(i&de)!==0?V(l):null;return{v:t,i:d,e:H(()=>(u(n,t??r,d??l,p),()=>{e.delete(o)}))}}function M(e,n,r){if(e.nodes)for(var o=e.nodes.start,l=e.nodes.end,u=n&&(n.f&T)===0?n.nodes.start:r;o!==null;){var i=pe(o);if(u.before(o),o===l)return;o=i}}function y(e,n,r){n===null?e.effect.first=r:n.next=r,r===null?e.effect.last=n:r.prev=n}const Ie=Symbol("is custom element"),Ce=Symbol("is html");function Xe(e){if(S){var n=!1,r=()=>{if(!n){if(n=!0,e.hasAttribute("value")){var o=e.value;q(e,"value",null),e.value=o}if(e.hasAttribute("checked")){var l=e.checked;q(e,"checked",null),e.checked=l}}};e.__on_r=r,X(r),Ee()}}function q(e,n,r,o){var l=be(e);S&&(l[n]=e.getAttribute(n),n==="src"||n==="srcset"||n==="href"&&e.nodeName==="LINK")||l[n]!==(l[n]=r)&&(n==="loading"&&(e[Te]=r),r==null?e.removeAttribute(n):typeof r!="string"&&ke(e).includes(n)?e[n]=r:e.setAttribute(n,r))}function be(e){return e.__attributes??={[Ie]:e.nodeName.includes("-"),[Ce]:e.namespaceURI===ye}}var B=new Map;function ke(e){var n=e.getAttribute("is")||e.nodeName,r=B.get(n);if(r)return r;B.set(n,r=[]);for(var o,l=e,u=Element.prototype;u!==l;){o=Ae(l);for(var i in o)o[i].set&&r.push(i);l=Se(l)}return r}const Q="/api";async function _(e,n){const r=await fetch(Q+e,{headers:{"Content-Type":"application/json"},...n});if(!r.ok){const o=await r.json().catch(()=>({error:r.statusText}));throw new Error(o.error||r.statusText)}if(r.status!==204)return r.json()}async function Me(){return _("/feeds")}async function xe(e){return _(`/feeds/${e}`)}async function Fe(e){return _("/feeds",{method:"POST",body:JSON.stringify({name:e})})}async function Le(e){return _(`/feeds/${e}`,{method:"DELETE"})}async function De(e){return _(`/feeds/${e}/refresh`,{method:"POST"})}async function Re(e){return _(`/channels/${e}`)}async function He(e,n){return _(`/feeds/${e}/channels`,{method:"POST",body:JSON.stringify({url:n})})}async function Pe(e){return _(`/channels/${e}`,{method:"DELETE"})}async function $e(e=100){return _(`/videos/recent?limit=${e}`)}async function ze(e=100){return _(`/videos/history?limit=${e}`)}async function Je(e){return _(`/videos/${e}/info`)}async function Ue(e,n,r){return _(`/videos/${e}/progress`,{method:"POST",body:JSON.stringify({progress:n,duration:r})})}async function Ve(e){return _("/import/url",{method:"POST",body:JSON.stringify({url:e})})}async function Ye(e){const n=new FormData;n.append("file",e);const r=await fetch(Q+"/import/file",{method:"POST",body:n});if(!r.ok){const o=await r.json().catch(()=>({error:r.statusText}));throw new Error(o.error||r.statusText)}return r.json()}async function qe(){return _("/packs")}const Ke=Object.freeze(Object.defineProperty({__proto__:null,addChannel:He,createFeed:Fe,deleteChannel:Pe,deleteFeed:Le,getChannel:Re,getFeed:xe,getFeeds:Me,getHistory:ze,getPacks:qe,getRecentVideos:$e,getVideoInfo:Je,importFromFile:Ye,importFromURL:Ve,refreshFeed:De,updateProgress:Ue},Symbol.toStringTag,{value:"Module"}));export{$e as a,Re as b,xe as c,De as d,Ge as e,Le as f,Me as g,Pe as h,je as i,ze as j,qe as k,Ve as l,Ye as m,Je as n,He as o,Ke as p,Xe as r,q as s,Ue as u};
