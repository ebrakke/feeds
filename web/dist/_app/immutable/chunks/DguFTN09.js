import{f as u,a as d,c as ve}from"./CMYthPH1.js";import{G as N,p as K,c as n,h as _,g as v,u as I,r as i,t as D,b as L,d as F,s as J,f as O}from"./DRd13Xrb.js";import{i as p}from"./B-ckIuUA.js";import{s as B,e as Q,i as de,q as ce}from"./BCt0s9Jx.js";import{p as M}from"./CEXIGE99.js";import{d as ge,s as S,e as ue}from"./B-oMrjzJ.js";function he(a,e,c){var g=a==null?"":""+a;return g===""?null:g}function fe(a,e){return a==null?null:String(a)}function be(a,e,c,g,m,o){var h=a.__className;if(N||h!==c||h===void 0){var w=he(c);(!N||w!==a.getAttribute("class"))&&(w==null?a.removeAttribute("class"):a.className=w),a.__className=c}return o}function _e(a,e,c,g){var m=a.__style;if(N||m!==e){var o=fe(e);(!N||o!==a.getAttribute("style"))&&(o==null?a.removeAttribute("style"):a.style.cssText=o),a.__style=e}return g}var me=u('<span class="absolute bottom-1 right-1 bg-black/80 text-white text-xs px-1 rounded"> </span>'),we=u('<div class="absolute bottom-0 left-0 right-0 h-1 bg-gray-700"><div class="h-full bg-red-600"></div></div>'),ye=u('<p class="text-xs text-gray-400"> </p>'),xe=u('<button class="w-full text-left px-3 py-2 text-sm hover:bg-gray-700 disabled:opacity-50"> </button>'),pe=u('<div class="absolute top-10 right-2 bg-gray-800 border border-gray-700 rounded-lg shadow-lg z-20 min-w-40"><p class="text-xs text-gray-400 px-3 py-2 border-b border-gray-700">Move channel to...</p> <!></div>'),Me=u('<button class="absolute top-2 right-2 bg-black/70 hover:bg-black/90 text-white p-1.5 rounded-full" title="Move channel to..."><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg></button> <!>',1),ke=u('<div class="relative"><a><div class="relative"><img class="w-full aspect-video object-cover" loading="lazy"/> <!> <!></div> <div class="p-3"><h3 class="font-medium text-sm line-clamp-2 mb-1"> </h3> <!> <p class="text-xs text-gray-500"> </p></div></a> <!></div>');function Ce(a,e){K(e,!0);let c=M(e,"showChannel",3,!0),g=M(e,"showMoveAction",3,!1),m=M(e,"availableFeeds",19,()=>[]),o=J(!1),h=J(!1);async function w(t,r){t.preventDefault(),t.stopPropagation(),F(h,!0);try{await ce(e.video.channel_id,r),F(o,!1),e.onChannelMoved?.()}catch(s){console.error("Failed to move channel:",s),alert("Failed to move channel")}finally{F(h,!1)}}function V(t){t.preventDefault(),t.stopPropagation(),F(o,!v(o))}function f(){F(o,!1)}function y(t){if(!t)return"";const r=Math.floor(t/3600),s=Math.floor(t%3600/60),b=t%60;return r>0?`${r}:${s.toString().padStart(2,"0")}:${b.toString().padStart(2,"0")}`:`${s}:${b.toString().padStart(2,"0")}`}function k(t){const r=new Date(t),b=new Date().getTime()-r.getTime(),l=Math.floor(b/(1e3*60*60*24));return l===0?"Today":l===1?"Yesterday":l<7?`${l} days ago`:l<30?`${Math.floor(l/7)} weeks ago`:l<365?`${Math.floor(l/30)} months ago`:`${Math.floor(l/365)} years ago`}let x=I(()=>e.progress?Math.round(e.progress.progress_seconds/e.progress.duration_seconds*100):0),U=I(()=>e.progress?.completed??!1);var T=ke(),C=n(T),z=n(C),P=n(z),H=_(P,2);{var X=t=>{var r=me(),s=n(r,!0);i(r),D(b=>S(s,b),[()=>y(e.video.duration)]),d(t,r)};p(H,t=>{e.video.duration&&t(X)})}var Z=_(H,2);{var $=t=>{var r=we(),s=n(r);i(r),D(()=>_e(s,`width: ${v(x)??""}%`)),d(t,r)};p(Z,t=>{e.progress&&v(x)>0&&v(x)<100&&t($)})}i(z);var R=_(z,2),j=n(R),ee=n(j,!0);i(j);var W=_(j,2);{var te=t=>{var r=ye(),s=n(r,!0);i(r),D(()=>S(s,e.video.channel_name)),d(t,r)};p(W,t=>{c()&&t(te)})}var Y=_(W,2),ae=n(Y,!0);i(Y),i(R),i(C);var re=_(C,2);{var oe=t=>{var r=Me(),s=O(r);s.__click=V;var b=_(s,2);{var l=G=>{var q=pe(),se=_(n(q),2);Q(se,17,m,de,(ie,E)=>{var A=xe();A.__click=ne=>w(ne,v(E).id);var le=n(A,!0);i(A),D(()=>{A.disabled=v(h),S(le,v(E).name)}),d(ie,A)}),i(q),d(G,q)};p(b,G=>{v(o)&&G(l)})}d(t,r)};p(re,t=>{g()&&m().length>0&&t(oe)})}i(T),D(t=>{B(C,"href",`/watch/${e.video.id??""}`),be(C,1,`block bg-gray-800 rounded-lg overflow-hidden hover:bg-gray-700 transition-colors ${v(U)?"opacity-60":""}`),B(P,"src",e.video.thumbnail),B(P,"alt",e.video.title),S(ee,e.video.title),S(ae,t)},[()=>k(e.video.published)]),ue("mouseleave",T,f),d(a,T),L()}ge(["click"]);var Ae=u('<div class="text-center py-12"><p class="text-gray-400">No videos yet.</p></div>'),De=u('<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"></div>');function Pe(a,e){K(e,!0);let c=M(e,"showChannel",3,!0),g=M(e,"showMoveAction",3,!1),m=M(e,"availableFeeds",19,()=>[]);var o=ve(),h=O(o);{var w=f=>{var y=Ae();d(f,y)},V=f=>{var y=De();Q(y,21,()=>e.videos,k=>k.id,(k,x)=>{Ce(k,{get video(){return v(x)},get progress(){return e.progressMap[v(x).id]},get showChannel(){return c()},get showMoveAction(){return g()},get availableFeeds(){return m()},get onChannelMoved(){return e.onChannelMoved}})}),i(y),d(f,y)};p(h,f=>{e.videos.length===0?f(w):f(V,!1)})}d(a,o),L()}export{Pe as V};
