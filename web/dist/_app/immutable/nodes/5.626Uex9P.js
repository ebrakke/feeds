import{c as T,a as i,f as _,b as ke}from"../chunks/Bn1lgkls.js";import{o as Fe}from"../chunks/BYPFo13k.js";import{p as Ce,s as n,a as D,f as E,b as Me,i as ze,d as a,g as t,u as De,$ as Ee,c as s,r,n as W,t as b,h as c}from"../chunks/D_G30FA3.js";import{d as Re,s as f}from"../chunks/CEQHbEfL.js";import{i as h}from"../chunks/KKXNucnH.js";import{c as Ve,d as je,f as He,e as Ae,s as Be,i as Ge,h as Se}from"../chunks/DhoS0KrS.js";import{h as Ie}from"../chunks/EanPgme1.js";import{s as Te,a as qe}from"../chunks/D-ayFN-b.js";import{p as Je}from"../chunks/K3UCoCvv.js";import{g as Ke}from"../chunks/N-c1coiT.js";import{V as Le}from"../chunks/B__FON94.js";var Ne=_('<div class="flex justify-center py-12"><svg class="animate-spin h-8 w-8 text-blue-500" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>'),Oe=_('<div class="text-center py-12"><p class="text-red-400 mb-4"> </p> <a href="/" class="text-blue-400 hover:underline">Go back home</a></div>'),Pe=_('<p class="text-gray-400 text-sm mt-1"> </p>'),Qe=ke('<svg class="animate-spin h-4 w-4" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Ue=_('<div class="flex items-center justify-between bg-gray-700 rounded px-3 py-2"><a class="hover:text-blue-400"> </a> <button class="text-red-400 hover:text-red-300 text-sm">Remove</button></div>'),We=_('<div class="mb-6 bg-gray-800 rounded-lg p-4"><h2 class="font-semibold mb-3"> </h2> <div class="space-y-2"></div></div>'),Xe=_('<div class="mb-4 flex items-start justify-between gap-4"><div><h1 class="text-2xl font-bold"> </h1> <!> <p class="text-gray-500 text-xs mt-1"> </p></div> <div class="flex gap-2 flex-shrink-0"><button class="bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white px-3 py-1.5 rounded text-sm inline-flex items-center gap-1"><!> Refresh</button> <button class="bg-gray-700 hover:bg-gray-600 text-white px-3 py-1.5 rounded text-sm"> </button> <button class="bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded text-sm">Delete</button></div></div> <!> <!>',1);function ct(X,Y){Ce(Y,!0);const Z=()=>qe(Je,"$page",ee),[ee,te]=Te();let d=n(null),y=n(D([])),q=n(D([])),J=n(D({})),ae=n(D([])),R=n(!0),v=n(null),w=n(!1),$=n(!1),V=De(()=>parseInt(Z().params.id));Fe(async()=>{await j()});async function j(){a(R,!0),a(v,null);try{const e=await Ve(t(V));a(d,e.feed,!0),a(y,e.channels,!0),a(q,e.videos,!0),a(J,e.progressMap||{},!0),a(ae,e.allFeeds,!0)}catch(e){a(v,e instanceof Error?e.message:"Failed to load feed",!0)}finally{a(R,!1)}}async function re(){a(w,!0);try{const e=await je(t(V));await j(),e.errors.length>0&&console.warn("Some channels failed:",e.errors)}catch(e){a(v,e instanceof Error?e.message:"Failed to refresh",!0)}finally{a(w,!1)}}async function se(){if(confirm(`Delete "${t(d)?.name}"? This cannot be undone.`))try{await He(t(V)),Ke("/")}catch(e){a(v,e instanceof Error?e.message:"Failed to delete feed",!0)}}async function oe(e,p){if(confirm(`Remove "${p}" from this feed?`))try{await Se(e),await j()}catch(k){a(v,k instanceof Error?k.message:"Failed to delete channel",!0)}}var K=T();Ie("71i2me",e=>{ze(()=>{Ee.title=`${t(d)?.name??"Feed"??""} - Feeds`})});var ie=E(K);{var le=e=>{var p=Ne();i(e,p)},ne=e=>{var p=T(),k=E(p);{var ce=m=>{var u=Oe(),F=s(u),H=s(F,!0);r(F),W(2),r(u),b(()=>f(H,t(v))),i(m,u)},de=m=>{var u=T(),F=E(u);{var H=A=>{var L=Xe(),B=E(L),G=s(B),S=s(G),ve=s(S,!0);r(S);var N=c(S,2);{var fe=o=>{var l=Pe(),x=s(l,!0);r(l),b(()=>f(x,t(d).description)),i(o,l)};h(N,o=>{t(d).description&&o(fe)})}var O=c(N,2),pe=s(O);r(O),r(G);var P=c(G,2),g=s(P);g.__click=re;var me=s(g);{var ue=o=>{var l=Qe();i(o,l)};h(me,o=>{t(w)&&o(ue)})}W(),r(g);var C=c(g,2);C.__click=()=>a($,!t($));var he=s(C);r(C);var _e=c(C,2);_e.__click=se,r(P),r(B);var Q=c(B,2);{var ge=o=>{var l=We(),x=s(l),be=s(x);r(x);var U=c(x,2);Ae(U,21,()=>t(y),Ge,(ye,M)=>{var I=Ue(),z=s(I),we=s(z,!0);r(z);var $e=c(z,2);$e.__click=()=>oe(t(M).id,t(M).name),r(I),b(()=>{Be(z,"href",`/channels/${t(M).id??""}`),f(we,t(M).name)}),i(ye,I)}),r(U),r(l),b(()=>f(be,`Channels (${t(y).length??""})`)),i(o,l)};h(Q,o=>{t($)&&o(ge)})}var xe=c(Q,2);Le(xe,{get videos(){return t(q)},get progressMap(){return t(J)}}),b(()=>{f(ve,t(d).name),f(pe,`${t(y).length??""} channels`),g.disabled=t(w),f(he,`${t($)?"Hide":"Show"} Channels`)}),i(A,L)};h(F,A=>{t(d)&&A(H)},!0)}i(m,u)};h(k,m=>{t(v)?m(ce):m(de,!1)},!0)}i(e,p)};h(ie,e=>{t(R)?e(le):e(ne,!1)})}i(X,K),Me(),te()}Re(["click"]);export{ct as component};
