import{c as Y,a as n,f,b as De}from"../chunks/CMYthPH1.js";import{o as Ee}from"../chunks/BTvDARnc.js";import{p as Re,s as c,a as D,f as E,b as Ve,i as Ae,d as r,g as e,u as q,$ as He,c as i,r as s,n as ee,t as y,h as l}from"../chunks/DRd13Xrb.js";import{d as Be,s as m}from"../chunks/B-oMrjzJ.js";import{i as v}from"../chunks/B-ckIuUA.js";import{d as Ge,f as Ie,e as Se,s as Te,i as Ne,h as Ye,j as qe}from"../chunks/BCt0s9Jx.js";import{h as Je}from"../chunks/DmEoDL_F.js";import{s as Ke,a as Le}from"../chunks/4vFQ4oUl.js";import{p as Oe}from"../chunks/DCm6qz_f.js";import{g as Pe}from"../chunks/BgT2UKuG.js";import{V as Qe}from"../chunks/DguFTN09.js";var Ue=f('<div class="flex justify-center py-12"><svg class="animate-spin h-8 w-8 text-blue-500" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>'),We=f('<div class="text-center py-12"><p class="text-red-400 mb-4"> </p> <a href="/" class="text-blue-400 hover:underline">Go back home</a></div>'),Xe=f('<p class="text-gray-400 text-sm mt-1"> </p>'),Ze=De('<svg class="animate-spin h-4 w-4" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),et=f('<button class="bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded text-sm">Delete</button>'),tt=f('<div class="text-center py-12 text-gray-400"><p class="mb-2">Your inbox is empty!</p> <p class="text-sm">New channels you subscribe to will appear here for triage.</p></div>'),at=f('<div class="flex items-center justify-between bg-gray-700 rounded px-3 py-2"><a class="hover:text-blue-400"> </a> <button class="text-red-400 hover:text-red-300 text-sm">Remove</button></div>'),rt=f('<div class="mb-6 bg-gray-800 rounded-lg p-4"><h2 class="font-semibold mb-3"> </h2> <div class="space-y-2"></div></div>'),st=f('<div class="mb-4 flex items-start justify-between gap-4"><div><h1 class="text-2xl font-bold"> </h1> <!> <p class="text-gray-500 text-xs mt-1"> </p></div> <div class="flex gap-2 flex-shrink-0"><button class="bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white px-3 py-1.5 rounded text-sm inline-flex items-center gap-1"><!> Refresh</button> <button class="bg-gray-700 hover:bg-gray-600 text-white px-3 py-1.5 rounded text-sm"> </button> <!></div></div> <!> <!> <!>',1);function ht(te,ae){Re(ae,!0);const re=()=>Le(Oe,"$page",se),[se,oe]=Ke();let d=c(null),g=c(D([])),R=c(D([])),J=c(D({})),K=c(D([])),V=c(!0),p=c(null),w=c(!1),F=c(!1),A=q(()=>parseInt(re().params.id)),H=q(()=>e(d)?.is_system===!0),ie=q(()=>e(K).filter(t=>t.id!==e(d)?.id&&!t.is_system));Ee(async()=>{await $()});async function $(){r(V,!0),r(p,null);try{const t=await Ge(e(A));r(d,t.feed,!0),r(g,t.channels,!0),r(R,t.videos,!0),r(J,t.progressMap||{},!0),r(K,t.allFeeds,!0)}catch(t){r(p,t instanceof Error?t.message:"Failed to load feed",!0)}finally{r(V,!1)}}async function ne(){r(w,!0);try{const t=await Ie(e(A));await $(),t.errors.length>0&&console.warn("Some channels failed:",t.errors)}catch(t){r(p,t instanceof Error?t.message:"Failed to refresh",!0)}finally{r(w,!1)}}async function le(){if(confirm(`Delete "${e(d)?.name}"? This cannot be undone.`))try{await Ye(e(A)),Pe("/")}catch(t){r(p,t instanceof Error?t.message:"Failed to delete feed",!0)}}async function de(t,u){if(confirm(`Remove "${u}" from this feed?`))try{await qe(t),await $()}catch(k){r(p,k instanceof Error?k.message:"Failed to delete channel",!0)}}var L=Y();Je("71i2me",t=>{Ae(()=>{He.title=`${e(d)?.name??"Feed"??""} - Feeds`})});var ce=E(L);{var ve=t=>{var u=Ue();n(t,u)},fe=t=>{var u=Y(),k=E(u);{var pe=h=>{var _=We(),C=i(_),B=i(C,!0);s(C),ee(2),s(_),y(()=>m(B,e(p))),n(h,_)},me=h=>{var _=Y(),C=E(_);{var B=G=>{var O=st(),I=E(O),S=i(I),T=i(S),ue=i(T,!0);s(T);var P=l(T,2);{var he=a=>{var o=Xe(),b=i(o,!0);s(o),y(()=>m(b,e(d).description)),n(a,o)};v(P,a=>{e(d).description&&a(he)})}var Q=l(P,2),_e=i(Q);s(Q),s(S);var U=l(S,2),x=i(U);x.__click=ne;var ge=i(x);{var xe=a=>{var o=Ze();n(a,o)};v(ge,a=>{e(w)&&a(xe)})}ee(),s(x);var M=l(x,2);M.__click=()=>r(F,!e(F));var be=i(M);s(M);var ye=l(M,2);{var we=a=>{var o=et();o.__click=le,n(a,o)};v(ye,a=>{e(H)||a(we)})}s(U),s(I);var W=l(I,2);{var Fe=a=>{var o=tt();n(a,o)};v(W,a=>{e(H)&&e(R).length===0&&e(g).length===0&&a(Fe)})}var X=l(W,2);{var $e=a=>{var o=rt(),b=i(o),Ce=i(b);s(b);var Z=l(b,2);Se(Z,21,()=>e(g),Ne,(Me,j)=>{var N=at(),z=i(N),je=i(z,!0);s(z);var ze=l(z,2);ze.__click=()=>de(e(j).id,e(j).name),s(N),y(()=>{Te(z,"href",`/channels/${e(j).id??""}`),m(je,e(j).name)}),n(Me,N)}),s(Z),s(o),y(()=>m(Ce,`Channels (${e(g).length??""})`)),n(a,o)};v(X,a=>{e(F)&&a($e)})}var ke=l(X,2);Qe(ke,{get videos(){return e(R)},get progressMap(){return e(J)},get showMoveAction(){return e(H)},get availableFeeds(){return e(ie)},onChannelMoved:$}),y(()=>{m(ue,e(d).name),m(_e,`${e(g).length??""} channels`),x.disabled=e(w),m(be,`${e(F)?"Hide":"Show"} Channels`)}),n(G,O)};v(C,G=>{e(d)&&G(B)},!0)}n(h,_)};v(k,h=>{e(p)?h(pe):h(me,!1)},!0)}n(t,u)};v(ce,t=>{e(V)?t(ve):t(fe,!1)})}n(te,L),Ve(),oe()}Be(["click"]);export{ht as component};
