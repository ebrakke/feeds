import{c as k,a as r,f as M,b as ae}from"../chunks/CMYthPH1.js";import{o as te}from"../chunks/BTvDARnc.js";import{p as re,s as l,a as E,f as u,b as se,i as oe,d as t,g as a,u as le,$ as ie,c as i,r as n,n as G,t as H,h as $}from"../chunks/DRd13Xrb.js";import{d as ne,s as R}from"../chunks/B-oMrjzJ.js";import{i as h}from"../chunks/B-ckIuUA.js";import{h as ce}from"../chunks/DmEoDL_F.js";import{b as fe,s as pe,c as ve}from"../chunks/BCt0s9Jx.js";import{s as de,a as me}from"../chunks/4vFQ4oUl.js";import{p as ue}from"../chunks/DCm6qz_f.js";import{V as he}from"../chunks/DguFTN09.js";var ge=M('<div class="flex justify-center py-12"><svg class="animate-spin h-8 w-8 text-blue-500" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>'),_e=M('<div class="text-center py-12"><p class="text-red-400 mb-4"> </p> <a href="/" class="text-blue-400 hover:underline">Go back home</a></div>'),xe=ae('<svg class="animate-spin h-4 w-4" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),be=M('<div class="mb-4 flex items-start justify-between gap-4"><div><h1 class="text-2xl font-bold"> </h1> <a target="_blank" rel="noopener" class="text-gray-400 text-sm hover:text-blue-400">View on YouTube</a></div> <button class="bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white px-3 py-1.5 rounded text-sm inline-flex items-center gap-1 flex-shrink-0"><!> Refresh</button></div> <!>',1);function Ae(I,T){re(T,!0);const Y=()=>me(ue,"$page",q),[q,D]=de();let c=l(null),V=l(E([])),z=l(E({})),g=l(!0),p=l(!1),f=l(null),F=le(()=>parseInt(Y().params.id));te(async()=>{await j()});async function j(){t(g,!0),t(f,null);try{const e=await fe(a(F));t(c,e.channel,!0),t(V,e.videos,!0),t(z,e.progressMap||{},!0)}catch(e){t(f,e instanceof Error?e.message:"Failed to load channel",!0)}finally{t(g,!1)}}async function J(){t(p,!0);try{await ve(a(F)),await j()}catch(e){t(f,e instanceof Error?e.message:"Failed to refresh",!0)}finally{t(p,!1)}}var A=k();ce("grfcol",e=>{oe(()=>{ie.title=`${a(c)?.name??"Channel"??""} - Feeds`})});var K=u(A);{var L=e=>{var v=ge();r(e,v)},N=e=>{var v=k(),O=u(v);{var P=s=>{var o=_e(),d=i(o),_=i(d,!0);n(d),G(2),n(o),H(()=>R(_,a(f))),r(s,o)},Q=s=>{var o=k(),d=u(o);{var _=x=>{var B=be(),b=u(B),y=i(b),w=i(y),S=i(w,!0);n(w);var U=$(w,2);n(y);var m=$(y,2);m.__click=J;var W=i(m);{var X=C=>{var ee=xe();r(C,ee)};h(W,C=>{a(p)&&C(X)})}G(),n(m),n(b);var Z=$(b,2);he(Z,{get videos(){return a(V)},get progressMap(){return a(z)},showChannel:!1}),H(()=>{R(S,a(c).name),pe(U,"href",a(c).url),m.disabled=a(p)}),r(x,B)};h(d,x=>{a(c)&&x(_)},!0)}r(s,o)};h(O,s=>{a(f)?s(P):s(Q,!1)},!0)}r(e,v)};h(K,e=>{a(g)?e(L):e(N,!1)})}r(I,A),se(),D()}ne(["click"]);export{Ae as component};
