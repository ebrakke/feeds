const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/DhoS0KrS.js","../chunks/D_G30FA3.js"])))=>i.map(i=>d[i]);
import{b as Te,_ as ze}from"../chunks/D-BV_Ye_.js";import{f as m,a as o,c as G,t as ie,b as Ue}from"../chunks/Bn1lgkls.js";import{o as qe,a as Ae}from"../chunks/BYPFo13k.js";import{C as Ee,H as K,e as Pe,I as Re,a9 as Ve,aa as je,ab as De,J as We,p as Be,s as p,a as He,t as I,b as Ye,i as Oe,h as g,c,d,g as a,u as Je,$ as Ne,r as v,f as Q,n as Ge}from"../chunks/D_G30FA3.js";import{d as Ke,s as j,e as X}from"../chunks/CEQHbEfL.js";import{i as w}from"../chunks/KKXNucnH.js";import{g as Qe,n as Xe,s as Z,e as Ze,i as $e,u as ne,o as ea}from"../chunks/DhoS0KrS.js";import{h as aa}from"../chunks/EanPgme1.js";import{s as ta,a as ra}from"../chunks/D-ayFN-b.js";import{p as sa}from"../chunks/K3UCoCvv.js";function le(r,i,L=!1){if(r.multiple){if(i==null)return;if(!Ve(i))return je();for(var _ of r.options)_.selected=i.includes(A(_));return}for(_ of r.options){var k=A(_);if(De(k,i)){_.selected=!0;return}}(!L||i!==void 0)&&(r.selectedIndex=-1)}function oa(r){var i=new MutationObserver(()=>{le(r,r.__value)});i.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),We(()=>{i.disconnect()})}function ia(r,i,L=i){var _=new WeakSet,k=!0;Ee(r,"change",n=>{var x=n?"[selected]":":checked",h;if(r.multiple)h=[].map.call(r.querySelectorAll(x),A);else{var C=r.querySelector(x)??r.querySelector("option:not([disabled])");h=C&&A(C)}L(h),K!==null&&_.add(K)}),Pe(()=>{var n=i();if(r===document.activeElement){var x=Re??K;if(_.has(x))return}if(le(r,n,k),k&&n===void 0){var h=r.querySelector(":checked");h!==null&&(n=A(h),L(n))}r.__value=n,k=!1}),oa(r)}function A(r){return"__value"in r?r.__value:r.value}var na=m('<div class="absolute inset-0 flex items-center justify-center bg-gray-900"><div class="text-center"><svg class="animate-spin h-10 w-10 text-blue-500 mx-auto mb-3" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <p class="text-gray-400 text-sm">Loading video...</p></div></div>'),la=m('<div class="absolute inset-0 flex items-center justify-center bg-gray-900"><div class="text-center px-4"><svg class="h-10 w-10 text-red-500 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <p class="text-red-400 mb-2"> </p> <a target="_blank" rel="noopener" class="text-blue-400 hover:text-blue-300 text-sm">Watch on YouTube instead</a></div></div>'),ca=m('<video class="w-full h-full" controls playsinline="">Your browser does not support the video tag.</video>',2),da=m('<span class="inline-block bg-gray-700 rounded h-6 w-64 animate-pulse"></span>'),va=m('<span class="inline-block bg-gray-700 rounded h-4 w-32 animate-pulse"></span>'),ua=m('<span class="text-green-400 text-sm">Subscribed!</span>'),fa=m("<option> </option>"),pa=Ue('<svg class="animate-spin h-3 w-3" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),_a=m('<div class="flex items-center gap-2"><select class="bg-gray-800 border border-gray-700 rounded px-2 py-1 text-sm"><option disabled>Add to...</option><!><option>+ Uncategorized</option></select> <button class="bg-red-600 hover:bg-red-700 disabled:opacity-50 text-white px-3 py-1 rounded text-sm inline-flex items-center gap-1"><!> Subscribe</button></div>'),ma=m('<a href="/import" class="text-sm text-blue-400 hover:text-blue-300">Create a feed to subscribe</a>'),ha=m('<div class="max-w-4xl mx-auto"><div class="aspect-video bg-black rounded-lg overflow-hidden mb-4 relative"><!></div> <h1 class="text-lg font-bold mb-2"><!></h1> <div class="flex items-center justify-between mb-4"><p class="text-gray-400"><!></p> <div><!></div></div> <a target="_blank" rel="noopener" class="text-sm text-gray-500 hover:text-blue-400">Watch on YouTube</a></div>');function Ma(r,i){Be(i,!0);const L=()=>ra(sa,"$page",_),[_,k]=ta();let n=Je(()=>L().params.id),x=p(""),h=p(""),C=p(""),$=p(""),ee=p(0),E=p(He([])),T=p(!0),D=p(null),P=p(!1),W=p(!1),M=p(""),u=null,ae=0;qe(async()=>{try{d(E,await Qe(),!0)}catch(e){console.warn("Failed to load feeds:",e)}try{const e=await Xe(a(n));d(x,e.title,!0),d(h,e.channel,!0),d(C,e.channelURL,!0),d($,e.streamURL,!0),d(ee,e.existingChannelID,!0),a(ee)>0&&d(W,!0)}catch(e){d(D,e instanceof Error?e.message:"Failed to load video",!0)}finally{d(T,!1)}}),Ae(()=>{u&&(te(),u.pause())});function ce(){u&&u.play().catch(()=>{})}function te(){if(!u)return;const e=Math.floor(u.currentTime),t=Math.floor(u.duration)||0;Math.abs(e-ae)>=5&&t>0&&(ae=e,ne(a(n),e,t).catch(()=>{}))}function de(){te()}function ve(){if(!u)return;const e=Math.floor(u.currentTime),t=Math.floor(u.duration)||0;t>0&&ne(a(n),e,t).catch(()=>{})}async function ue(){if(!(!a(M)||!a(C))){d(P,!0);try{const e=a(M)==="0"?await fe():parseInt(a(M));await ea(e,a(C)),d(W,!0)}catch(e){console.error("Failed to subscribe:",e),alert(e instanceof Error?e.message:"Failed to subscribe")}finally{d(P,!1)}}}async function fe(){const{createFeed:e}=await ze(async()=>{const{createFeed:z}=await import("../chunks/DhoS0KrS.js").then(U=>U.p);return{createFeed:z}},__vite__mapDeps([0,1]),import.meta.url);return(await e("Uncategorized")).id}var B=ha();aa("1oiicp0",e=>{Oe(()=>{Ne.title=`${(a(x)||"Watch")??""} - Feeds`})});var H=c(B),pe=c(H);{var _e=e=>{var t=na();o(e,t)},me=e=>{var t=G(),z=Q(t);{var U=l=>{var s=la(),f=c(s),b=g(c(f),2),y=c(b,!0);v(b);var S=g(b,2);v(f),v(s),I(()=>{j(y,a(D)),Z(S,"href",`https://www.youtube.com/watch?v=${a(n)??""}`)}),o(l,s)},N=l=>{var s=ca();Te(s,f=>u=f,()=>u),I(()=>Z(s,"src",a($))),X("loadeddata",s,ce),X("timeupdate",s,de),X("pause",s,ve),o(l,s)};w(z,l=>{a(D)?l(U):l(N,!1)},!0)}o(e,t)};w(pe,e=>{a(T)?e(_e):e(me,!1)})}v(H);var Y=g(H,2),he=c(Y);{var be=e=>{var t=da();o(e,t)},ge=e=>{var t=ie();I(()=>j(t,a(x))),o(e,t)};w(he,e=>{a(T)?e(be):e(ge,!1)})}v(Y);var O=g(Y,2),J=c(O),xe=c(J);{var ye=e=>{var t=va();o(e,t)},we=e=>{var t=ie();I(()=>j(t,a(h))),o(e,t)};w(xe,e=>{a(T)?e(ye):e(we,!1)})}v(J);var re=g(J,2),ke=c(re);{var Ce=e=>{var t=ua();o(e,t)},Fe=e=>{var t=G(),z=Q(t);{var U=l=>{var s=_a(),f=c(s),b=c(f);b.value=b.__value="";var y=g(b);Ze(y,17,()=>a(E),$e,(F,V)=>{var q=fa(),Se=c(q,!0);v(q);var se={};I(oe=>{j(Se,a(V).name),se!==(se=oe)&&(q.value=(q.__value=oe)??"")},[()=>a(V).id.toString()]),o(F,q)});var S=g(y);S.value=S.__value="0",v(f);var R=g(f,2);R.__click=ue;var Le=c(R);{var Me=F=>{var V=pa();o(F,V)};w(Le,F=>{a(P)&&F(Me)})}Ge(),v(R),v(s),I(()=>R.disabled=a(P)||!a(M)),ia(f,()=>a(M),F=>d(M,F)),o(l,s)},N=l=>{var s=G(),f=Q(s);{var b=y=>{var S=ma();o(y,S)};w(f,y=>{a(E).length===0&&!a(T)&&y(b)},!0)}o(l,s)};w(z,l=>{a(C)&&a(E).length>0?l(U):l(N,!1)},!0)}o(e,t)};w(ke,e=>{a(W)?e(Ce):e(Fe,!1)})}v(re),v(O);var Ie=g(O,2);v(B),I(()=>Z(Ie,"href",`https://www.youtube.com/watch?v=${a(n)??""}`)),o(r,B),Ye(),k()}Ke(["click"]);export{Ma as component};
