import{f as p,a as d,b as J}from"../chunks/CMYthPH1.js";import{p as ce,s as v,a as pe,B as me,d as o,c as s,t as h,g as r,b as fe,e as ue,h as i,$ as ve,n as H,r as a}from"../chunks/DRd13Xrb.js";import{d as be,e as M,s as x}from"../chunks/B-oMrjzJ.js";import{i as b}from"../chunks/B-ckIuUA.js";import{l as ge,r as he,m as N,n as xe,e as S,i as V}from"../chunks/BCt0s9Jx.js";import{h as ye}from"../chunks/DmEoDL_F.js";import{b as _e}from"../chunks/Eb2Cq2IH.js";import{g as j}from"../chunks/BgT2UKuG.js";var we=p('<div class="bg-red-900/50 border border-red-700 rounded-lg p-4 mb-6"><p class="text-red-400"> </p></div>'),ke=J('<svg class="animate-spin h-4 w-4" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Fe=J('<svg class="animate-spin h-4 w-4" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Ie=p('<span class="text-xs bg-gray-600 rounded px-2 py-0.5"> </span>'),$e=p('<div class="flex gap-1 mt-2"></div>'),Ce=p('<button class="text-left bg-gray-700 hover:bg-gray-600 disabled:opacity-50 rounded-lg p-4 transition-colors"><h3 class="font-semibold"> </h3> <p class="text-sm text-gray-400"> </p> <!></button>'),Ue=p('<div class="bg-gray-800 rounded-lg p-6"><h2 class="text-lg font-semibold mb-4">Subscription Packs</h2> <p class="text-gray-400 text-sm mb-4">Quick-start with curated channel collections.</p> <div class="grid gap-3"></div></div>'),ze=p('<div class="max-w-2xl mx-auto"><h1 class="text-2xl font-bold mb-6">Import Feed</h1> <!> <div class="bg-gray-800 rounded-lg p-6 mb-6"><h2 class="text-lg font-semibold mb-4">Import from URL</h2> <form><input type="url" placeholder="https://example.com/feed.json" class="w-full bg-gray-900 border border-gray-700 rounded px-4 py-2 mb-4 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500"/> <button type="submit" class="bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white px-4 py-2 rounded inline-flex items-center gap-2"><!> Import</button></form></div> <div class="bg-gray-800 rounded-lg p-6 mb-6"><h2 class="text-lg font-semibold mb-4">Import from File</h2> <p class="text-gray-400 text-sm mb-4">Upload a NewPipe export (JSON) or Feeds export file.</p> <form><input type="file" accept=".json" class="w-full bg-gray-900 border border-gray-700 rounded px-4 py-2 mb-4 text-white file:mr-4 file:py-1 file:px-3 file:rounded file:border-0 file:bg-blue-600 file:text-white file:cursor-pointer"/> <button type="submit" class="bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white px-4 py-2 rounded inline-flex items-center gap-2"><!> Upload & Import</button></form></div> <!></div>');function He(O,Q){ce(Q,!0);let m=v(""),g=v(null),l=v(!1),n=v(null),y=v(pe([]));me(()=>{ge().then(e=>o(y,e,!0)).catch(()=>{})});async function q(e){if(e.preventDefault(),!!r(m).trim()){o(l,!0),o(n,null);try{const t=await N(r(m));j(`/feeds/${t.id}`)}catch(t){o(n,t instanceof Error?t.message:"Failed to import",!0)}finally{o(l,!1)}}}async function G(e){if(e.preventDefault(),!!r(g)){o(l,!0),o(n,null);try{const t=await xe(r(g));j(`/feeds/${t.id}`)}catch(t){o(n,t instanceof Error?t.message:"Failed to import",!0)}finally{o(l,!1)}}}function K(e){const t=e.target;o(g,t.files?.[0]??null,!0)}async function T(e){o(l,!0),o(n,null);try{const t=window.location.origin+`/api/packs/${e}`,c=await N(t);j(`/feeds/${c.id}`)}catch(t){o(n,t instanceof Error?t.message:"Failed to import pack",!0)}finally{o(l,!1)}}var _=ze();ye("1kumcmu",e=>{ue(()=>{ve.title="Import - Feeds"})});var A=i(s(_),2);{var W=e=>{var t=we(),c=s(t),z=s(c,!0);a(c),a(t),h(()=>x(z,r(n))),d(e,t)};b(A,e=>{r(n)&&e(W)})}var w=i(A,2),k=i(s(w),2),F=s(k);he(F);var I=i(F,2),X=s(I);{var Y=e=>{var t=ke();d(e,t)};b(X,e=>{r(l)&&e(Y)})}H(),a(I),a(k),a(w);var $=i(w,2),C=i(s($),4),D=s(C);D.__change=K;var U=i(D,2),Z=s(U);{var ee=e=>{var t=Fe();d(e,t)};b(Z,e=>{r(l)&&e(ee)})}H(),a(U),a(C),a($);var te=i($,2);{var re=e=>{var t=Ue(),c=i(s(t),4);S(c,21,()=>r(y),V,(z,f)=>{var u=Ce();u.__click=()=>T(r(f).name);var P=s(u),ae=s(P,!0);a(P);var B=i(P,2),oe=s(B,!0);a(B);var se=i(B,2);{var le=E=>{var L=$e();S(L,21,()=>r(f).tags,V,(ie,ne)=>{var R=Ie(),de=s(R,!0);a(R),h(()=>x(de,r(ne))),d(ie,R)}),a(L),d(E,L)};b(se,E=>{r(f).tags.length>0&&E(le)})}a(u),h(()=>{u.disabled=r(l),x(ae,r(f).name),x(oe,r(f).description)}),d(z,u)}),a(c),a(t),d(e,t)};b(te,e=>{r(y).length>0&&e(re)})}a(_),h(e=>{I.disabled=e,U.disabled=r(l)||!r(g)},[()=>r(l)||!r(m).trim()]),M("submit",k,q),_e(F,()=>r(m),e=>o(m,e)),M("submit",C,G),d(O,_),fe()}be(["change","click"]);export{He as component};
